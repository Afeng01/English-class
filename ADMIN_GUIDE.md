# 管理员界面使用指南
> 更新日期：2025-11-29 14:10（UTC+8） · 维护者：Codex

## 启用管理员模式

### 后端配置
1. 编辑 `backend/.env`
2. 设置 `ADMIN_MODE=true`
3. 重启后端服务

### 前端配置
1. 编辑 `frontend/.env.local`
2. 设置 `VITE_ADMIN_MODE=true`
3. 重启前端服务

## 访问管理员界面

1. 启动前后端服务
2. 访问 http://localhost:5173/admin
3. 登录后即可看到管理员界面

## 功能说明

### 书籍列表
- 显示所有书籍的详细信息
- 支持多选操作

### 备份书籍
1. 选择需要备份的书籍（可多选）
2. 点击“备份选中书籍”
3. 确认后开始备份
4. 备份文件保存在：`backend/data/backups/book_{id}_{timestamp}.json`

### 删除书籍
1. 选择需要删除的书籍（可多选）
2. 点击“删除选中书籍”
3. 在确认对话框中：
   - 勾选“删除前自动备份”（推荐）
   - 查看将要删除的书籍列表
   - 点击“确认删除”
4. 删除操作会同时清理：
   - 数据库记录（SQLite + Supabase）
   - 封面图片（OSS + 本地）
   - 章节和词汇数据

## 注意事项

⚠️ **重要警告**
- 删除操作不可撤销！
- 建议始终勾选“删除前自动备份”
- 删除前请仔细确认书籍列表
- 备份文件需要手动管理，定期清理旧备份

⚠️ **生产环境**
- 生产环境**必须**设置 `ADMIN_MODE=false`
- 如需在生产环境使用，请增加额外的身份验证
- 建议使用独立的管理后台而非此界面

## 故障排查

### 无法访问管理员界面
- 检查环境变量是否正确配置
- 检查是否已登录
- 查看浏览器控制台错误信息

### 删除失败
- 检查 OSS/Supabase 配置是否正确
- 查看后端日志获取详细错误信息
- 部分失败时会显示失败的书籍ID

### 备份失败
- 检查 `backend/data/backups/` 目录权限
- 确保磁盘空间充足
